<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ... (keep the existing head content) ... -->
</head>
<body>
    <!-- ... (keep the existing body content) ... -->

    <script>
        function getInventory() {
            $.get('/inventory')
                .done(function(data) {
                    $('#inventory-level').text('Current level: ' + data.inventory_level);
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    console.error("Error fetching inventory:", textStatus, errorThrown);
                    $('#inventory-level').text('Error loading inventory');
                });
        }

        function getUsers() {
            $.get('/users')
                .done(function(data) {
                    $('#active-users').text('Active users: ' + data.active_users);
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    console.error("Error fetching users:", textStatus, errorThrown);
                    $('#active-users').text('Error loading users');
                });
        }

        function createSale() {
            $.post('/sales')
                .done(function(data) {
                    $('#sale-result').text(data.message);
                    getInventory();  // Refresh inventory after sale
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    console.error("Error creating sale:", textStatus, errorThrown);
                    $('#sale-result').text('Error recording sale');
                });
        }

        // Initial data load
        $(document).ready(function() {
            getInventory();
            getUsers();
        });
    </script>
</body>
</html>